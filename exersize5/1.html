<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>
    div {
      height: 500px;
      background-color: #eee;
    }
  </style>
</head>
<body>


<pre id="rabbit">
  |\   /|
   \|_|/
   /. .\
  =\_Y_/=
   {>o<}
</pre>

<button id="button">Скрыть</button>


<script>

  button.addEventListener('click', function (e) {
        hide()
        document.contextmenu()
    })

  function hide() {
    let event = new CustomEvent('hide', {
      cancelable: true
      
    })
    console.log('назначилось new CustomEvent hide')
    if(!rabbit.dispatchEvent(event)){
      console.log('отменено')
    } else {
      rabbit.hidden = !rabbit.hidden
    }
  }

  rabbit.addEventListener('hide', function (e) {
        console.log('к rabbit привязали обработчик события  hide')
        if(!confirm('Закрыть?', '')) e.preventDefault()
    })
  


</script>
</body>
</html>